// NOTE: Assertions have been autogenerated by utils/update_cc_test_checks.py UTC_ARGS: --function-signature --include-generated-funcs
// RUN: %clang_cc1 -verify -fompss-2 -disable-llvm-passes -ferror-limit 100 %s -S -emit-llvm -o - | FileCheck %s
// expected-no-diagnostics

int array[10][20];
void foo1(int **p, int n) {
    #pragma oss task depend(in : [n + 1]p, [n + 2]array)
    {}
    #pragma oss task depend(in : ([3]p)[2], ([4]array)[3])
    {}
    #pragma oss task depend(in : ([3]p)[2 : n], ([4]array)[3 : n])
    {}
    #pragma oss task depend(in : [3]p[2], [4]array[3])
    {}
}












void foo2() {
    int n, m;
    int vla[10];
    #pragma oss task inout(([n]vla)[m])
    {}
}




#pragma oss task in(pvla[sizeof(*pvla)])
void foo3(int n, int (*pvla)[n - 1]) {
}

void bar() {
    int mat[10][10];
    foo3(10, mat);
}



void foo4(int x, int y, int z) {
    int a, b, c;
    int vla[x + 1][y + 2][z + 3];
    #pragma oss task inout(([a](vla[2]))[b])
    {}
    #pragma oss task inout([c]([a][b]vla))
    {}
    #pragma oss task inout([c]([a][b]vla[sizeof(vla)]))
    {}
}




// CHECK-LABEL: define {{[^@]+}}@foo1
// CHECK-SAME: (ptr noundef [[P:%.*]], i32 noundef [[N:%.*]]) #[[ATTR0:[0-9]+]] !dbg [[DBG5:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[P_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[N_ADDR:%.*]] = alloca i32, align 4
// CHECK-NEXT:    store ptr [[P]], ptr [[P_ADDR]], align 8
// CHECK-NEXT:    store i32 [[N]], ptr [[N_ADDR]], align 4
// CHECK-NEXT:    [[TMP0:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr @array, [10 x [20 x i32]] undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[P_ADDR]], ptr undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[N_ADDR]], i32 undef), "QUAL.OSS.DEP.IN"(ptr [[P_ADDR]], [9 x i8] c"[n + 1]p\00", ptr @compute_dep, ptr [[P_ADDR]], ptr [[N_ADDR]]), "QUAL.OSS.DEP.IN"(ptr @array, [13 x i8] c"[n + 2]array\00", ptr @compute_dep.1, ptr [[N_ADDR]], ptr @array) ], !dbg [[DBG9:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP0]]), !dbg [[DBG10:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr @array, [10 x [20 x i32]] undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[P_ADDR]], ptr undef), "QUAL.OSS.DEP.IN"(ptr [[P_ADDR]], [10 x i8] c"([3]p)[2]\00", ptr @compute_dep.2, ptr [[P_ADDR]]), "QUAL.OSS.DEP.IN"(ptr @array, [14 x i8] c"([4]array)[3]\00", ptr @compute_dep.3, ptr @array) ], !dbg [[DBG11:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP1]]), !dbg [[DBG12:![0-9]+]]
// CHECK-NEXT:    [[TMP2:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr @array, [10 x [20 x i32]] undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[P_ADDR]], ptr undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[N_ADDR]], i32 undef), "QUAL.OSS.DEP.IN"(ptr [[P_ADDR]], [14 x i8] c"([3]p)[2 : n]\00", ptr @compute_dep.4, ptr [[P_ADDR]], ptr [[N_ADDR]]), "QUAL.OSS.DEP.IN"(ptr @array, [18 x i8] c"([4]array)[3 : n]\00", ptr @compute_dep.5, ptr [[N_ADDR]], ptr @array) ], !dbg [[DBG13:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP2]]), !dbg [[DBG14:![0-9]+]]
// CHECK-NEXT:    [[TMP3:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr @array, [10 x [20 x i32]] undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[P_ADDR]], ptr undef), "QUAL.OSS.DEP.IN"(ptr [[P_ADDR]], [8 x i8] c"[3]p[2]\00", ptr @compute_dep.6, ptr [[P_ADDR]]), "QUAL.OSS.DEP.IN"(ptr @array, [12 x i8] c"[4]array[3]\00", ptr @compute_dep.7, ptr @array) ], !dbg [[DBG15:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP3]]), !dbg [[DBG16:![0-9]+]]
// CHECK-NEXT:    ret void, !dbg [[DBG17:![0-9]+]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep
// CHECK-SAME: (ptr [[P:%.*]], ptr [[N:%.*]]) #[[ATTR2:[0-9]+]] !dbg [[DBG18:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T:%.*]], align 8
// CHECK-NEXT:    [[P_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[N_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[P]], ptr [[P_ADDR]], align 8
// CHECK-NEXT:    store ptr [[N]], ptr [[N_ADDR]], align 8
// CHECK-NEXT:    [[TMP0:%.*]] = load ptr, ptr [[P]], align 8, !dbg [[DBG19:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = load i32, ptr [[N]], align 4, !dbg [[DBG21:![0-9]+]]
// CHECK-NEXT:    [[ADD:%.*]] = add nsw i32 [[TMP1]], 1, !dbg [[DBG22:![0-9]+]]
// CHECK-NEXT:    [[TMP2:%.*]] = zext i32 [[ADD]] to i64
// CHECK-NEXT:    [[TMP3:%.*]] = mul i64 [[TMP2]], 8
// CHECK-NEXT:    [[TMP4:%.*]] = mul i64 [[TMP2]], 8
// CHECK-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[TMP0]], ptr [[TMP5]], align 8
// CHECK-NEXT:    [[TMP6:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 [[TMP3]], ptr [[TMP6]], align 8
// CHECK-NEXT:    [[TMP7:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP7]], align 8
// CHECK-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 [[TMP4]], ptr [[TMP8]], align 8
// CHECK-NEXT:    [[TMP9:%.*]] = load [[STRUCT__DEPEND_UNPACK_T]], ptr [[RETVAL]], align 8, !dbg [[DBG23:![0-9]+]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T]] [[TMP9]], !dbg [[DBG23]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.1
// CHECK-SAME: (ptr [[N:%.*]], ptr [[ARRAY:%.*]]) #[[ATTR2]] !dbg [[DBG24:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_0:%.*]], align 8
// CHECK-NEXT:    [[N_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[ARRAY_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[N]], ptr [[N_ADDR]], align 8
// CHECK-NEXT:    store ptr [[ARRAY]], ptr [[ARRAY_ADDR]], align 8
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [10 x [20 x i32]], ptr [[ARRAY]], i64 0, i64 0, !dbg [[DBG25:![0-9]+]]
// CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[N]], align 4, !dbg [[DBG27:![0-9]+]]
// CHECK-NEXT:    [[ADD:%.*]] = add nsw i32 [[TMP0]], 2, !dbg [[DBG28:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = zext i32 [[ADD]] to i64
// CHECK-NEXT:    [[TMP2:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYDECAY]], ptr [[TMP2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 80, ptr [[TMP3]], align 8
// CHECK-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP4]], align 8
// CHECK-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 80, ptr [[TMP5]], align 8
// CHECK-NEXT:    [[TMP6:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], i32 0, i32 4
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[TMP6]], align 8
// CHECK-NEXT:    [[TMP7:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], i32 0, i32 5
// CHECK-NEXT:    store i64 0, ptr [[TMP7]], align 8
// CHECK-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], i32 0, i32 6
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[TMP8]], align 8
// CHECK-NEXT:    [[TMP9:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_0]], ptr [[RETVAL]], align 8, !dbg [[DBG29:![0-9]+]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_0]] [[TMP9]], !dbg [[DBG29]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.2
// CHECK-SAME: (ptr [[P:%.*]]) #[[ATTR2]] !dbg [[DBG30:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_1:%.*]], align 8
// CHECK-NEXT:    [[P_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[P]], ptr [[P_ADDR]], align 8
// CHECK-NEXT:    [[TMP0:%.*]] = load ptr, ptr [[P]], align 8, !dbg [[DBG31:![0-9]+]]
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [3 x ptr], ptr [[TMP0]], i64 0, i64 0, !dbg [[DBG33:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_1]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYDECAY]], ptr [[TMP1]], align 8
// CHECK-NEXT:    [[TMP2:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_1]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 24, ptr [[TMP2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_1]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 16, ptr [[TMP3]], align 8
// CHECK-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_1]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 24, ptr [[TMP4]], align 8
// CHECK-NEXT:    [[TMP5:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_1]], ptr [[RETVAL]], align 8, !dbg [[DBG31]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_1]] [[TMP5]], !dbg [[DBG31]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.3
// CHECK-SAME: (ptr [[ARRAY:%.*]]) #[[ATTR2]] !dbg [[DBG34:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_2:%.*]], align 8
// CHECK-NEXT:    [[ARRAY_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[ARRAY]], ptr [[ARRAY_ADDR]], align 8
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [10 x [20 x i32]], ptr [[ARRAY]], i64 0, i64 0, !dbg [[DBG35:![0-9]+]]
// CHECK-NEXT:    [[ARRAYDECAY1:%.*]] = getelementptr inbounds [4 x [20 x i32]], ptr [[ARRAYDECAY]], i64 0, i64 0, !dbg [[DBG37:![0-9]+]]
// CHECK-NEXT:    [[TMP0:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYDECAY1]], ptr [[TMP0]], align 8
// CHECK-NEXT:    [[TMP1:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 80, ptr [[TMP1]], align 8
// CHECK-NEXT:    [[TMP2:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 80, ptr [[TMP3]], align 8
// CHECK-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], i32 0, i32 4
// CHECK-NEXT:    store i64 4, ptr [[TMP4]], align 8
// CHECK-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], i32 0, i32 5
// CHECK-NEXT:    store i64 3, ptr [[TMP5]], align 8
// CHECK-NEXT:    [[TMP6:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], i32 0, i32 6
// CHECK-NEXT:    store i64 4, ptr [[TMP6]], align 8
// CHECK-NEXT:    [[TMP7:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_2]], ptr [[RETVAL]], align 8, !dbg [[DBG35]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_2]] [[TMP7]], !dbg [[DBG35]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.4
// CHECK-SAME: (ptr [[P:%.*]], ptr [[N:%.*]]) #[[ATTR2]] !dbg [[DBG38:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_3:%.*]], align 8
// CHECK-NEXT:    [[P_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[N_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[P]], ptr [[P_ADDR]], align 8
// CHECK-NEXT:    store ptr [[N]], ptr [[N_ADDR]], align 8
// CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[N]], align 4, !dbg [[DBG39:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = sext i32 [[TMP0]] to i64
// CHECK-NEXT:    [[TMP2:%.*]] = add i64 2, [[TMP1]]
// CHECK-NEXT:    [[TMP3:%.*]] = load ptr, ptr [[P]], align 8, !dbg [[DBG41:![0-9]+]]
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [3 x ptr], ptr [[TMP3]], i64 0, i64 0, !dbg [[DBG42:![0-9]+]]
// CHECK-NEXT:    [[TMP4:%.*]] = mul i64 [[TMP2]], 8
// CHECK-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_3]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYDECAY]], ptr [[TMP5]], align 8
// CHECK-NEXT:    [[TMP6:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_3]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 24, ptr [[TMP6]], align 8
// CHECK-NEXT:    [[TMP7:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_3]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 16, ptr [[TMP7]], align 8
// CHECK-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_3]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 [[TMP4]], ptr [[TMP8]], align 8
// CHECK-NEXT:    [[TMP9:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_3]], ptr [[RETVAL]], align 8, !dbg [[DBG41]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_3]] [[TMP9]], !dbg [[DBG41]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.5
// CHECK-SAME: (ptr [[N:%.*]], ptr [[ARRAY:%.*]]) #[[ATTR2]] !dbg [[DBG43:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_4:%.*]], align 8
// CHECK-NEXT:    [[N_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[ARRAY_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[N]], ptr [[N_ADDR]], align 8
// CHECK-NEXT:    store ptr [[ARRAY]], ptr [[ARRAY_ADDR]], align 8
// CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[N]], align 4, !dbg [[DBG44:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = sext i32 [[TMP0]] to i64
// CHECK-NEXT:    [[TMP2:%.*]] = add i64 3, [[TMP1]]
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [10 x [20 x i32]], ptr [[ARRAY]], i64 0, i64 0, !dbg [[DBG46:![0-9]+]]
// CHECK-NEXT:    [[ARRAYDECAY1:%.*]] = getelementptr inbounds [4 x [20 x i32]], ptr [[ARRAYDECAY]], i64 0, i64 0, !dbg [[DBG47:![0-9]+]]
// CHECK-NEXT:    [[TMP3:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYDECAY1]], ptr [[TMP3]], align 8
// CHECK-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 80, ptr [[TMP4]], align 8
// CHECK-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP5]], align 8
// CHECK-NEXT:    [[TMP6:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 80, ptr [[TMP6]], align 8
// CHECK-NEXT:    [[TMP7:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], i32 0, i32 4
// CHECK-NEXT:    store i64 4, ptr [[TMP7]], align 8
// CHECK-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], i32 0, i32 5
// CHECK-NEXT:    store i64 3, ptr [[TMP8]], align 8
// CHECK-NEXT:    [[TMP9:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], i32 0, i32 6
// CHECK-NEXT:    store i64 [[TMP2]], ptr [[TMP9]], align 8
// CHECK-NEXT:    [[TMP10:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_4]], ptr [[RETVAL]], align 8, !dbg [[DBG46]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_4]] [[TMP10]], !dbg [[DBG46]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.6
// CHECK-SAME: (ptr [[P:%.*]]) #[[ATTR2]] !dbg [[DBG48:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_5:%.*]], align 8
// CHECK-NEXT:    [[P_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[P]], ptr [[P_ADDR]], align 8
// CHECK-NEXT:    [[TMP0:%.*]] = load ptr, ptr [[P]], align 8, !dbg [[DBG49:![0-9]+]]
// CHECK-NEXT:    [[ARRAYIDX:%.*]] = getelementptr inbounds ptr, ptr [[TMP0]], i64 2, !dbg [[DBG49]]
// CHECK-NEXT:    [[TMP1:%.*]] = load ptr, ptr [[ARRAYIDX]], align 8, !dbg [[DBG49]]
// CHECK-NEXT:    [[TMP2:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_5]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[TMP1]], ptr [[TMP2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_5]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 12, ptr [[TMP3]], align 8
// CHECK-NEXT:    [[TMP4:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_5]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP4]], align 8
// CHECK-NEXT:    [[TMP5:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_5]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 12, ptr [[TMP5]], align 8
// CHECK-NEXT:    [[TMP6:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_5]], ptr [[RETVAL]], align 8, !dbg [[DBG51:![0-9]+]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_5]] [[TMP6]], !dbg [[DBG51]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.7
// CHECK-SAME: (ptr [[ARRAY:%.*]]) #[[ATTR2]] !dbg [[DBG52:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_6:%.*]], align 8
// CHECK-NEXT:    [[ARRAY_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[ARRAY]], ptr [[ARRAY_ADDR]], align 8
// CHECK-NEXT:    [[ARRAYIDX:%.*]] = getelementptr inbounds [10 x [20 x i32]], ptr [[ARRAY]], i64 0, i64 3, !dbg [[DBG53:![0-9]+]]
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [20 x i32], ptr [[ARRAYIDX]], i64 0, i64 0, !dbg [[DBG53]]
// CHECK-NEXT:    [[TMP0:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_6]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYDECAY]], ptr [[TMP0]], align 8
// CHECK-NEXT:    [[TMP1:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_6]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 16, ptr [[TMP1]], align 8
// CHECK-NEXT:    [[TMP2:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_6]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_6]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 16, ptr [[TMP3]], align 8
// CHECK-NEXT:    [[TMP4:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_6]], ptr [[RETVAL]], align 8, !dbg [[DBG55:![0-9]+]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_6]] [[TMP4]], !dbg [[DBG55]]
//
//
// CHECK-LABEL: define {{[^@]+}}@foo2
// CHECK-SAME: () #[[ATTR0]] !dbg [[DBG56:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[N:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[M:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[VLA:%.*]] = alloca [10 x i32], align 16
// CHECK-NEXT:    [[TMP0:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr [[VLA]], [10 x i32] undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[N]], i32 undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[M]], i32 undef), "QUAL.OSS.DEP.INOUT"(ptr [[VLA]], [12 x i8] c"([n]vla)[m]\00", ptr @compute_dep.8, ptr [[VLA]], ptr [[N]], ptr [[M]]) ], !dbg [[DBG57:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP0]]), !dbg [[DBG58:![0-9]+]]
// CHECK-NEXT:    ret void, !dbg [[DBG59:![0-9]+]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.8
// CHECK-SAME: (ptr [[VLA:%.*]], ptr [[N:%.*]], ptr [[M:%.*]]) #[[ATTR2]] !dbg [[DBG60:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_7:%.*]], align 8
// CHECK-NEXT:    [[VLA_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[N_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[M_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store ptr [[VLA]], ptr [[VLA_ADDR]], align 8
// CHECK-NEXT:    store ptr [[N]], ptr [[N_ADDR]], align 8
// CHECK-NEXT:    store ptr [[M]], ptr [[M_ADDR]], align 8
// CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[M]], align 4, !dbg [[DBG61:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = sext i32 [[TMP0]] to i64
// CHECK-NEXT:    [[TMP2:%.*]] = add i64 [[TMP1]], 1
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [10 x i32], ptr [[VLA]], i64 0, i64 0, !dbg [[DBG63:![0-9]+]]
// CHECK-NEXT:    [[TMP3:%.*]] = load i32, ptr [[N]], align 4, !dbg [[DBG64:![0-9]+]]
// CHECK-NEXT:    [[TMP4:%.*]] = zext i32 [[TMP3]] to i64
// CHECK-NEXT:    [[TMP5:%.*]] = mul i64 [[TMP4]], 4
// CHECK-NEXT:    [[TMP6:%.*]] = mul i64 [[TMP1]], 4
// CHECK-NEXT:    [[TMP7:%.*]] = mul i64 [[TMP2]], 4
// CHECK-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_7]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYDECAY]], ptr [[TMP8]], align 8
// CHECK-NEXT:    [[TMP9:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_7]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 [[TMP5]], ptr [[TMP9]], align 8
// CHECK-NEXT:    [[TMP10:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_7]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 [[TMP6]], ptr [[TMP10]], align 8
// CHECK-NEXT:    [[TMP11:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_7]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 [[TMP7]], ptr [[TMP11]], align 8
// CHECK-NEXT:    [[TMP12:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_7]], ptr [[RETVAL]], align 8, !dbg [[DBG64]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_7]] [[TMP12]], !dbg [[DBG64]]
//
//
// CHECK-LABEL: define {{[^@]+}}@foo3
// CHECK-SAME: (i32 noundef [[N:%.*]], ptr noundef [[PVLA:%.*]]) #[[ATTR0]] !dbg [[DBG65:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[N_ADDR:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[PVLA_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store i32 [[N]], ptr [[N_ADDR]], align 4
// CHECK-NEXT:    store ptr [[PVLA]], ptr [[PVLA_ADDR]], align 8
// CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[N_ADDR]], align 4, !dbg [[DBG66:![0-9]+]]
// CHECK-NEXT:    [[SUB:%.*]] = sub nsw i32 [[TMP0]], 1, !dbg [[DBG67:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = zext i32 [[SUB]] to i64
// CHECK-NEXT:    ret void, !dbg [[DBG68:![0-9]+]]
//
//
// CHECK-LABEL: define {{[^@]+}}@bar
// CHECK-SAME: () #[[ATTR0]] !dbg [[DBG69:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[MAT:%.*]] = alloca [10 x [10 x i32]], align 16
// CHECK-NEXT:    [[CALL_ARG:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[CALL_ARG1:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    store i32 10, ptr [[CALL_ARG]], align 4, !dbg [[DBG70:![0-9]+]]
// CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[CALL_ARG]], align 4, !dbg [[DBG71:![0-9]+]]
// CHECK-NEXT:    [[SUB:%.*]] = sub nsw i32 [[TMP0]], 1, !dbg [[DBG72:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = zext i32 [[SUB]] to i64, !dbg [[DBG73:![0-9]+]]
// CHECK-NEXT:    [[ARRAYDECAY:%.*]] = getelementptr inbounds [10 x [10 x i32]], ptr [[MAT]], i64 0, i64 0, !dbg [[DBG74:![0-9]+]]
// CHECK-NEXT:    store ptr [[ARRAYDECAY]], ptr [[CALL_ARG1]], align 8, !dbg [[DBG74]]
// CHECK-NEXT:    [[TMP2:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.FIRSTPRIVATE"(ptr [[CALL_ARG]], i32 undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[CALL_ARG1]], ptr undef), "QUAL.OSS.DEP.IN"(ptr [[CALL_ARG1]], [20 x i8] c"pvla[sizeof(*pvla)]\00", ptr @compute_dep.9, ptr [[CALL_ARG1]], i64 [[TMP1]]), "QUAL.OSS.CAPTURED"(i64 [[TMP1]]), "QUAL.OSS.DECL.SOURCE"([10 x i8] c"foo3:38:9\00") ], !dbg [[DBG73]]
// CHECK-NEXT:    [[TMP3:%.*]] = load i32, ptr [[CALL_ARG]], align 4, !dbg [[DBG70]]
// CHECK-NEXT:    [[TMP4:%.*]] = load ptr, ptr [[CALL_ARG1]], align 8, !dbg [[DBG74]]
// CHECK-NEXT:    call void @foo3(i32 noundef [[TMP3]], ptr noundef [[TMP4]]), !dbg [[DBG73]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP2]]), !dbg [[DBG73]]
// CHECK-NEXT:    ret void, !dbg [[DBG75:![0-9]+]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.9
// CHECK-SAME: (ptr [[PVLA:%.*]], i64 [[TMP0:%.*]]) #[[ATTR2]] !dbg [[DBG76:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_8:%.*]], align 8
// CHECK-NEXT:    [[PVLA_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[DOTADDR:%.*]] = alloca i64, align 8
// CHECK-NEXT:    store ptr [[PVLA]], ptr [[PVLA_ADDR]], align 8
// CHECK-NEXT:    store i64 [[TMP0]], ptr [[DOTADDR]], align 8
// CHECK-NEXT:    [[TMP1:%.*]] = load ptr, ptr [[PVLA]], align 8, !dbg [[DBG77:![0-9]+]]
// CHECK-NEXT:    [[TMP2:%.*]] = mul nuw i64 4, [[TMP0]], !dbg [[DBG79:![0-9]+]]
// CHECK-NEXT:    [[TMP3:%.*]] = add i64 [[TMP2]], 1
// CHECK-NEXT:    [[TMP4:%.*]] = load ptr, ptr [[PVLA]], align 8, !dbg [[DBG80:![0-9]+]]
// CHECK-NEXT:    [[TMP5:%.*]] = mul i64 [[TMP0]], 4
// CHECK-NEXT:    [[TMP6:%.*]] = mul i64 [[TMP0]], 4
// CHECK-NEXT:    [[TMP7:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[TMP4]], ptr [[TMP7]], align 8
// CHECK-NEXT:    [[TMP8:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 [[TMP5]], ptr [[TMP8]], align 8
// CHECK-NEXT:    [[TMP9:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP9]], align 8
// CHECK-NEXT:    [[TMP10:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 [[TMP6]], ptr [[TMP10]], align 8
// CHECK-NEXT:    [[TMP11:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], i32 0, i32 4
// CHECK-NEXT:    store i64 1, ptr [[TMP11]], align 8
// CHECK-NEXT:    [[TMP12:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], i32 0, i32 5
// CHECK-NEXT:    store i64 [[TMP2]], ptr [[TMP12]], align 8
// CHECK-NEXT:    [[TMP13:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], i32 0, i32 6
// CHECK-NEXT:    store i64 [[TMP3]], ptr [[TMP13]], align 8
// CHECK-NEXT:    [[TMP14:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_8]], ptr [[RETVAL]], align 8, !dbg [[DBG80]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_8]] [[TMP14]], !dbg [[DBG80]]
//
//
// CHECK-LABEL: define {{[^@]+}}@foo4
// CHECK-SAME: (i32 noundef [[X:%.*]], i32 noundef [[Y:%.*]], i32 noundef [[Z:%.*]]) #[[ATTR0]] !dbg [[DBG81:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[X_ADDR:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[Y_ADDR:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[Z_ADDR:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[A:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[B:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[C:%.*]] = alloca i32, align 4
// CHECK-NEXT:    [[SAVED_STACK:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[__VLA_EXPR0:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[__VLA_EXPR1:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[__VLA_EXPR2:%.*]] = alloca i64, align 8
// CHECK-NEXT:    store i32 [[X]], ptr [[X_ADDR]], align 4
// CHECK-NEXT:    store i32 [[Y]], ptr [[Y_ADDR]], align 4
// CHECK-NEXT:    store i32 [[Z]], ptr [[Z_ADDR]], align 4
// CHECK-NEXT:    [[TMP0:%.*]] = load i32, ptr [[X_ADDR]], align 4, !dbg [[DBG82:![0-9]+]]
// CHECK-NEXT:    [[ADD:%.*]] = add nsw i32 [[TMP0]], 1, !dbg [[DBG83:![0-9]+]]
// CHECK-NEXT:    [[TMP1:%.*]] = zext i32 [[ADD]] to i64, !dbg [[DBG84:![0-9]+]]
// CHECK-NEXT:    [[TMP2:%.*]] = load i32, ptr [[Y_ADDR]], align 4, !dbg [[DBG85:![0-9]+]]
// CHECK-NEXT:    [[ADD1:%.*]] = add nsw i32 [[TMP2]], 2, !dbg [[DBG86:![0-9]+]]
// CHECK-NEXT:    [[TMP3:%.*]] = zext i32 [[ADD1]] to i64, !dbg [[DBG84]]
// CHECK-NEXT:    [[TMP4:%.*]] = load i32, ptr [[Z_ADDR]], align 4, !dbg [[DBG87:![0-9]+]]
// CHECK-NEXT:    [[ADD2:%.*]] = add nsw i32 [[TMP4]], 3, !dbg [[DBG88:![0-9]+]]
// CHECK-NEXT:    [[TMP5:%.*]] = zext i32 [[ADD2]] to i64, !dbg [[DBG84]]
// CHECK-NEXT:    [[TMP6:%.*]] = call ptr @llvm.stacksave(), !dbg [[DBG84]]
// CHECK-NEXT:    store ptr [[TMP6]], ptr [[SAVED_STACK]], align 8, !dbg [[DBG84]]
// CHECK-NEXT:    [[TMP7:%.*]] = mul nuw i64 [[TMP1]], [[TMP3]], !dbg [[DBG84]]
// CHECK-NEXT:    [[TMP8:%.*]] = mul nuw i64 [[TMP7]], [[TMP5]], !dbg [[DBG84]]
// CHECK-NEXT:    [[VLA:%.*]] = alloca i32, i64 [[TMP8]], align 16, !dbg [[DBG84]]
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[__VLA_EXPR0]], align 8, !dbg [[DBG84]]
// CHECK-NEXT:    store i64 [[TMP3]], ptr [[__VLA_EXPR1]], align 8, !dbg [[DBG84]]
// CHECK-NEXT:    store i64 [[TMP5]], ptr [[__VLA_EXPR2]], align 8, !dbg [[DBG84]]
// CHECK-NEXT:    [[TMP9:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr [[VLA]], i32 undef), "QUAL.OSS.VLA.DIMS"(ptr [[VLA]], i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]), "QUAL.OSS.FIRSTPRIVATE"(ptr [[A]], i32 undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[B]], i32 undef), "QUAL.OSS.CAPTURED"(i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]), "QUAL.OSS.DEP.INOUT"(ptr [[VLA]], [17 x i8] c"([a](vla[2]))[b]\00", ptr @compute_dep.10, ptr [[VLA]], ptr [[A]], ptr [[B]], i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]) ], !dbg [[DBG89:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP9]]), !dbg [[DBG90:![0-9]+]]
// CHECK-NEXT:    [[TMP10:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr [[VLA]], i32 undef), "QUAL.OSS.VLA.DIMS"(ptr [[VLA]], i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]), "QUAL.OSS.FIRSTPRIVATE"(ptr [[A]], i32 undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[B]], i32 undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[C]], i32 undef), "QUAL.OSS.CAPTURED"(i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]), "QUAL.OSS.DEP.INOUT"(ptr [[VLA]], [15 x i8] c"[c]([a][b]vla)\00", ptr @compute_dep.11, ptr [[VLA]], ptr [[A]], ptr [[B]], ptr [[C]], i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]) ], !dbg [[DBG91:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP10]]), !dbg [[DBG92:![0-9]+]]
// CHECK-NEXT:    [[TMP11:%.*]] = call token @llvm.directive.region.entry() [ "DIR.OSS"([5 x i8] c"TASK\00"), "QUAL.OSS.SHARED"(ptr [[VLA]], i32 undef), "QUAL.OSS.VLA.DIMS"(ptr [[VLA]], i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]), "QUAL.OSS.FIRSTPRIVATE"(ptr [[A]], i32 undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[B]], i32 undef), "QUAL.OSS.FIRSTPRIVATE"(ptr [[C]], i32 undef), "QUAL.OSS.CAPTURED"(i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]), "QUAL.OSS.DEP.INOUT"(ptr [[VLA]], [28 x i8] c"[c]([a][b]vla[sizeof(vla)])\00", ptr @compute_dep.12, ptr [[VLA]], ptr [[A]], ptr [[B]], ptr [[C]], i64 [[TMP1]], i64 [[TMP3]], i64 [[TMP5]]) ], !dbg [[DBG93:![0-9]+]]
// CHECK-NEXT:    call void @llvm.directive.region.exit(token [[TMP11]]), !dbg [[DBG94:![0-9]+]]
// CHECK-NEXT:    [[TMP12:%.*]] = load ptr, ptr [[SAVED_STACK]], align 8, !dbg [[DBG95:![0-9]+]]
// CHECK-NEXT:    call void @llvm.stackrestore(ptr [[TMP12]]), !dbg [[DBG95]]
// CHECK-NEXT:    ret void, !dbg [[DBG95]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.10
// CHECK-SAME: (ptr [[VLA:%.*]], ptr [[A:%.*]], ptr [[B:%.*]], i64 [[TMP0:%.*]], i64 [[TMP1:%.*]], i64 [[TMP2:%.*]]) #[[ATTR2]] !dbg [[DBG96:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_9:%.*]], align 8
// CHECK-NEXT:    [[VLA_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[A_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[B_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[DOTADDR:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[DOTADDR1:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[DOTADDR2:%.*]] = alloca i64, align 8
// CHECK-NEXT:    store ptr [[VLA]], ptr [[VLA_ADDR]], align 8
// CHECK-NEXT:    store ptr [[A]], ptr [[A_ADDR]], align 8
// CHECK-NEXT:    store ptr [[B]], ptr [[B_ADDR]], align 8
// CHECK-NEXT:    store i64 [[TMP0]], ptr [[DOTADDR]], align 8
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[DOTADDR1]], align 8
// CHECK-NEXT:    store i64 [[TMP2]], ptr [[DOTADDR2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = load i32, ptr [[B]], align 4, !dbg [[DBG97:![0-9]+]]
// CHECK-NEXT:    [[TMP4:%.*]] = sext i32 [[TMP3]] to i64
// CHECK-NEXT:    [[TMP5:%.*]] = add i64 [[TMP4]], 1
// CHECK-NEXT:    [[TMP6:%.*]] = mul nuw i64 [[TMP1]], [[TMP2]], !dbg [[DBG99:![0-9]+]]
// CHECK-NEXT:    [[TMP7:%.*]] = mul nsw i64 2, [[TMP6]], !dbg [[DBG99]]
// CHECK-NEXT:    [[ARRAYIDX:%.*]] = getelementptr inbounds i32, ptr [[VLA]], i64 [[TMP7]], !dbg [[DBG99]]
// CHECK-NEXT:    [[TMP8:%.*]] = load i32, ptr [[A]], align 4, !dbg [[DBG100:![0-9]+]]
// CHECK-NEXT:    [[TMP9:%.*]] = zext i32 [[TMP8]] to i64
// CHECK-NEXT:    [[TMP10:%.*]] = mul i64 [[TMP2]], 4
// CHECK-NEXT:    [[TMP11:%.*]] = mul i64 [[TMP2]], 4
// CHECK-NEXT:    [[TMP12:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYIDX]], ptr [[TMP12]], align 8
// CHECK-NEXT:    [[TMP13:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 [[TMP10]], ptr [[TMP13]], align 8
// CHECK-NEXT:    [[TMP14:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP14]], align 8
// CHECK-NEXT:    [[TMP15:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 [[TMP11]], ptr [[TMP15]], align 8
// CHECK-NEXT:    [[TMP16:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], i32 0, i32 4
// CHECK-NEXT:    store i64 [[TMP9]], ptr [[TMP16]], align 8
// CHECK-NEXT:    [[TMP17:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], i32 0, i32 5
// CHECK-NEXT:    store i64 [[TMP4]], ptr [[TMP17]], align 8
// CHECK-NEXT:    [[TMP18:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], i32 0, i32 6
// CHECK-NEXT:    store i64 [[TMP5]], ptr [[TMP18]], align 8
// CHECK-NEXT:    [[TMP19:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_9]], ptr [[RETVAL]], align 8, !dbg [[DBG100]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_9]] [[TMP19]], !dbg [[DBG100]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.11
// CHECK-SAME: (ptr [[VLA:%.*]], ptr [[A:%.*]], ptr [[B:%.*]], ptr [[C:%.*]], i64 [[TMP0:%.*]], i64 [[TMP1:%.*]], i64 [[TMP2:%.*]]) #[[ATTR2]] !dbg [[DBG101:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_10:%.*]], align 8
// CHECK-NEXT:    [[VLA_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[A_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[B_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[C_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[DOTADDR:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[DOTADDR1:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[DOTADDR2:%.*]] = alloca i64, align 8
// CHECK-NEXT:    store ptr [[VLA]], ptr [[VLA_ADDR]], align 8
// CHECK-NEXT:    store ptr [[A]], ptr [[A_ADDR]], align 8
// CHECK-NEXT:    store ptr [[B]], ptr [[B_ADDR]], align 8
// CHECK-NEXT:    store ptr [[C]], ptr [[C_ADDR]], align 8
// CHECK-NEXT:    store i64 [[TMP0]], ptr [[DOTADDR]], align 8
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[DOTADDR1]], align 8
// CHECK-NEXT:    store i64 [[TMP2]], ptr [[DOTADDR2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = load i32, ptr [[C]], align 4, !dbg [[DBG102:![0-9]+]]
// CHECK-NEXT:    [[TMP4:%.*]] = zext i32 [[TMP3]] to i64
// CHECK-NEXT:    [[TMP5:%.*]] = load i32, ptr [[B]], align 4, !dbg [[DBG104:![0-9]+]]
// CHECK-NEXT:    [[TMP6:%.*]] = zext i32 [[TMP5]] to i64
// CHECK-NEXT:    [[TMP7:%.*]] = mul i64 [[TMP2]], 4
// CHECK-NEXT:    [[TMP8:%.*]] = mul i64 [[TMP2]], 4
// CHECK-NEXT:    [[TMP9:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[VLA]], ptr [[TMP9]], align 8
// CHECK-NEXT:    [[TMP10:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 [[TMP7]], ptr [[TMP10]], align 8
// CHECK-NEXT:    [[TMP11:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP11]], align 8
// CHECK-NEXT:    [[TMP12:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 [[TMP8]], ptr [[TMP12]], align 8
// CHECK-NEXT:    [[TMP13:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 4
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[TMP13]], align 8
// CHECK-NEXT:    [[TMP14:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 5
// CHECK-NEXT:    store i64 0, ptr [[TMP14]], align 8
// CHECK-NEXT:    [[TMP15:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 6
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[TMP15]], align 8
// CHECK-NEXT:    [[TMP16:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 7
// CHECK-NEXT:    store i64 [[TMP6]], ptr [[TMP16]], align 8
// CHECK-NEXT:    [[TMP17:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 8
// CHECK-NEXT:    store i64 0, ptr [[TMP17]], align 8
// CHECK-NEXT:    [[TMP18:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 9
// CHECK-NEXT:    store i64 [[TMP6]], ptr [[TMP18]], align 8
// CHECK-NEXT:    [[TMP19:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 10
// CHECK-NEXT:    store i64 [[TMP4]], ptr [[TMP19]], align 8
// CHECK-NEXT:    [[TMP20:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 11
// CHECK-NEXT:    store i64 0, ptr [[TMP20]], align 8
// CHECK-NEXT:    [[TMP21:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], i32 0, i32 12
// CHECK-NEXT:    store i64 [[TMP4]], ptr [[TMP21]], align 8
// CHECK-NEXT:    [[TMP22:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_10]], ptr [[RETVAL]], align 8, !dbg [[DBG104]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_10]] [[TMP22]], !dbg [[DBG104]]
//
//
// CHECK-LABEL: define {{[^@]+}}@compute_dep.12
// CHECK-SAME: (ptr [[VLA:%.*]], ptr [[A:%.*]], ptr [[B:%.*]], ptr [[C:%.*]], i64 [[TMP0:%.*]], i64 [[TMP1:%.*]], i64 [[TMP2:%.*]]) #[[ATTR2]] !dbg [[DBG105:![0-9]+]] {
// CHECK-NEXT:  entry:
// CHECK-NEXT:    [[RETVAL:%.*]] = alloca [[STRUCT__DEPEND_UNPACK_T_11:%.*]], align 8
// CHECK-NEXT:    [[VLA_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[A_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[B_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[C_ADDR:%.*]] = alloca ptr, align 8
// CHECK-NEXT:    [[DOTADDR:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[DOTADDR1:%.*]] = alloca i64, align 8
// CHECK-NEXT:    [[DOTADDR2:%.*]] = alloca i64, align 8
// CHECK-NEXT:    store ptr [[VLA]], ptr [[VLA_ADDR]], align 8
// CHECK-NEXT:    store ptr [[A]], ptr [[A_ADDR]], align 8
// CHECK-NEXT:    store ptr [[B]], ptr [[B_ADDR]], align 8
// CHECK-NEXT:    store ptr [[C]], ptr [[C_ADDR]], align 8
// CHECK-NEXT:    store i64 [[TMP0]], ptr [[DOTADDR]], align 8
// CHECK-NEXT:    store i64 [[TMP1]], ptr [[DOTADDR1]], align 8
// CHECK-NEXT:    store i64 [[TMP2]], ptr [[DOTADDR2]], align 8
// CHECK-NEXT:    [[TMP3:%.*]] = mul nuw i64 [[TMP0]], [[TMP1]], !dbg [[DBG106:![0-9]+]]
// CHECK-NEXT:    [[TMP4:%.*]] = mul nuw i64 [[TMP3]], [[TMP2]], !dbg [[DBG106]]
// CHECK-NEXT:    [[TMP5:%.*]] = mul nuw i64 4, [[TMP4]], !dbg [[DBG106]]
// CHECK-NEXT:    [[TMP6:%.*]] = mul nuw i64 [[TMP1]], [[TMP2]], !dbg [[DBG108:![0-9]+]]
// CHECK-NEXT:    [[TMP7:%.*]] = mul nsw i64 [[TMP5]], [[TMP6]], !dbg [[DBG108]]
// CHECK-NEXT:    [[ARRAYIDX:%.*]] = getelementptr inbounds i32, ptr [[VLA]], i64 [[TMP7]], !dbg [[DBG108]]
// CHECK-NEXT:    [[TMP8:%.*]] = load i32, ptr [[C]], align 4, !dbg [[DBG109:![0-9]+]]
// CHECK-NEXT:    [[TMP9:%.*]] = zext i32 [[TMP8]] to i64
// CHECK-NEXT:    [[TMP10:%.*]] = load i32, ptr [[B]], align 4, !dbg [[DBG110:![0-9]+]]
// CHECK-NEXT:    [[TMP11:%.*]] = zext i32 [[TMP10]] to i64
// CHECK-NEXT:    [[TMP12:%.*]] = mul i64 [[TMP2]], 4
// CHECK-NEXT:    [[TMP13:%.*]] = mul i64 [[TMP2]], 4
// CHECK-NEXT:    [[TMP14:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 0
// CHECK-NEXT:    store ptr [[ARRAYIDX]], ptr [[TMP14]], align 8
// CHECK-NEXT:    [[TMP15:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 1
// CHECK-NEXT:    store i64 [[TMP12]], ptr [[TMP15]], align 8
// CHECK-NEXT:    [[TMP16:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 2
// CHECK-NEXT:    store i64 0, ptr [[TMP16]], align 8
// CHECK-NEXT:    [[TMP17:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 3
// CHECK-NEXT:    store i64 [[TMP13]], ptr [[TMP17]], align 8
// CHECK-NEXT:    [[TMP18:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 4
// CHECK-NEXT:    store i64 [[TMP11]], ptr [[TMP18]], align 8
// CHECK-NEXT:    [[TMP19:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 5
// CHECK-NEXT:    store i64 0, ptr [[TMP19]], align 8
// CHECK-NEXT:    [[TMP20:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 6
// CHECK-NEXT:    store i64 [[TMP11]], ptr [[TMP20]], align 8
// CHECK-NEXT:    [[TMP21:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 7
// CHECK-NEXT:    store i64 [[TMP9]], ptr [[TMP21]], align 8
// CHECK-NEXT:    [[TMP22:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 8
// CHECK-NEXT:    store i64 0, ptr [[TMP22]], align 8
// CHECK-NEXT:    [[TMP23:%.*]] = getelementptr inbounds [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], i32 0, i32 9
// CHECK-NEXT:    store i64 [[TMP9]], ptr [[TMP23]], align 8
// CHECK-NEXT:    [[TMP24:%.*]] = load [[STRUCT__DEPEND_UNPACK_T_11]], ptr [[RETVAL]], align 8, !dbg [[DBG110]]
// CHECK-NEXT:    ret [[STRUCT__DEPEND_UNPACK_T_11]] [[TMP24]], !dbg [[DBG110]]
//
